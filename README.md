# Operativni sistemi
Na ovom repozitorijumu se nalaze rešeni zadaci sa laboratorijski vežbi iz operativnih sistema, urađeni za potrebe pripreme za kolokvijum i ispit. Neki pokušaji su varijacija na zadatu temu i nisu uspešno rešeni. Neki ni ne mogu da se reše na načine predstavljene na vežbama što predstavlja veliku nepravdu za studente koji su dobili zadatak na laboratorijskoj vežbi. Ostali zadaci su rešeni uspešno, sa možda slobodnijim tumačenjem broja iteracija, pisanja po fajlovima i standardnim izlazima, a sve radi čitljivosti i lakšeg otklanjanja grešaka.
Pored rešenja nalazi se i folder *.vscode* koji sadrži podešavanja da se uz pomoć F5 može pokrenuti i debagirati program u *VS Code*. U tabu *Run and Debug* (Ctrl+Shift+D) odabrati iz padajućeg menija opciju koja sadrži *Zastava za niti*. Treba napomenuti da tako nije moguće prosleđivanje podatka kao argument programa iz konzole. Za rešavanje tog problema dodati argumente u *.vscode/launch.json* u polje *"args"* kao stringove odvojene zapetom. Još jedno rešenje, prema mom mišljenju i brže, je da se slobodnije pristupi čitanju zadatka jer je čitanje argumenta programa iz konzole svakako najlakše od svega što se traži, a samo iziskuje dodatno udaranje po tastaturi. Unutar foldera se nalazi i fajl sa *isečcima*, odnosno delovima programa koji se često ponavljaju, koji će da ubrza proces kucanja.
# Zadaci
## 1. Niti
1. Korišćenjem programskog jezika C napisati Linux program koji u datoteku izlaz.txt upisuje niz od prvih 20 parnih i 20 neparnih brojeva redom. Parne brojeve upisuje jedna nit, a neparne druga nit. Sinhronizacijom niti semaforima obezbediti da se u datoteku parni i neparni brojevi upisuju naizmenično.
2. Kao i primer iznad samo umesto semafora muteks i uslovne promenjive. (Ovaj primer nije moguće rešiti na ovaj način (ili sam se samo zagledao na jedan način rešavanja i prevideo sve ostale). Razlog leži u tome što postoji mogućnost da se pozove `signal` pre `wait` što će dovesti do beskonačnog čekanja. Rešenje koje je priloženo se može izvršiti sa željenim ishodom u zavisnosti od toga kako se pozovu niti. Ostavio sam printove i veći broj iteracija tako da ko želi da vidi ovaj efekat na delu će uz dovoljno pokretanja programa sigurno jednom dobiti željeni redosled poziva.)
3. Korišćenjem programskog jezika C napisati Linux program threadovi u kome dve niti u tekstualnu datoteku upisuju redom cele brojeve od 1 do 20, pri čemu je svaki broj u zasebnom redu. Prva nit upisuje samo neparne, a druga nit samo parne brojeve. Sinhronizacijom niti obezbediti da se brojevi upisuju u datoteku pravilnim redosledom, 1 2 3 4 5 itd. (Isti kao 1.1).
4. Korišćenjem programskog jezika C napisati Linux progam koji u glavnoj niti od korisnika očekuje da unese ceo broj. Zatim startuje drugu nit, prosleđuje joj uneti broj, a druga nit odbrojava (i štampa na ekranu brojeve kako odbrojava) od 0 do unetog broja sa pauzom od 3 sekunde između dva uzastopna broja. Zatim u glavnoj niti korisnik ponovo unosi ceo broj i ovaj proces odbrojavanja i unosa broja se ponavlja sve dok korisnik ne unese „KRAJ“. 
## 2. Procesi
1. Korišćenjem programskog jezika C kreirati program koji se deli u dva Linux procesa koji generišu slučajne celobrojne vrednosti i upisuju ih u datoteku čiji se naziv prosleđuje kao argument komandne linije glavnog procesa. Prvi proces generiše niz od tri slučajne pozitivne celobrojne vrednosti i upisuje ih u datoteku. Nakon toga drugi proces generiše dve slučajne negativne celobrojne vrednosti i upisuje ih u istu datoteku. Postupak se ponavlja N puta (naizmenično prvi pa drugi proces). Vrednost N se takođe prosleđuje kao argument komandne linije. Sinhronizovati rad procesa korišćenjem semafora. (Nisam znao da postoje *System V* semafori pa sam rešio uz pomoć *Posix imenovanih* semafora. Razlog za njihovu upotrebu, umesto neimenovanih, je što se prilikom kreiranja procesa pravi "nova" memorija za novi proces i promena semafora se ne vide u oba. Kod ovih semafora što sam uočio da je obavezno da se koristi `unlink` jer će inače ostati ime semfora negde i gubiće se program pri narednim pokretanjima.)
2. Isti zadatak kao i prvi samo rešen kako je zamišljeno, uz pomoć System V.
## 3. Datovodi
1. Korišćenjem programskog jezika C kreirati tri Linux procesa koja komuniciraju korišćenjem datavoda. Prvi proces generiše niz proizvoljnih celih brojeva (dužina niza je fiksna i iznosi 20 brojeva) a zatim računa zbir svih tako generisanih brojeva. Ukoliko je dobijeni zbir paran broj, generisani niz brojeva se korišćenjem datavoda šalje drugom procesu koji ih upisuje u datoteku BROJEVI.txt. Ukoliko je dobijeni zbir neparan broj, generisani niz brojeva se korišćenjem datavoda šalje trećem procesu koji ih štampa na standardnom izlazu.
2. Korišćenjem programskog jezika C kreirati tri Linux procesa koja komuniciraju korišćenjem datavoda. 
Prvi proces generiše niz proizvoljnih karaktera (dužina niza je fiksna i iznosi 20 karaktera) a zatim računa zbir ASCII vrednosti svih tako generisanih karaktera. Ukoliko je dobijeni zbir paran broj, generisani niz karaktera se korišćenjem datavoda šalje drugom procesu koji ih upisuje u datoteku KARAKTERI.txt. Ukoliko je dobijeni zbir neparan broj, generisani niz karaktera se korišćenjem datavoda šalje trećem procesu koji ih štampa na standardnom izlazu.
3. Korišćenjem programskog jezika C kreirati dva Linux procesa koja komuniciraju korišćenjem datavoda. Jedan od procesa šalje drugom procesu slučajno generisanu celobrojnu vrednost. Drugi proces primljenu vrednost štampa na standardnom izlazu. Komunikacije se ponavlja 50 puta. 
## 4. Ispitni zadaci
1. Jun 2021. Prvi zadatak - Korišćenjem programskog jezika C kreirati Linux program u kome korisnik sa tastature unosi rečenicu. Glavni program zatim kreira dve niti. Prva nit sortira reči u unetoj rečenici u leksikografski opadajućem redosledu, a po završetku sortiranja druga nit na ekranu štampa tu rečenicu tako da samo prva reč počinje velikim slovom, a sve ostale reči malim. Po završetku rada ove dve niti glavni program treba da odštampa: "KRAJ".
2. Jun 2021. Drugi zadatak - Korišćenjem programskog jezika C kreirati Linux program koji oponaša program more. Ovaj program očekuje dva argumenta komandne linije. Prvi argument je naziv programa koji treba da startuje i čiji izlaz da prikazuje ekran po ekran. Drugi argument N je broj linija koje prikazuje na ekranu posle čega prikazuje poruku - MORE - , čeka pritisak bilo kog tastera i nakon toga prikazuje narednih N linija itd... (Kompajlirati z4.2.pom za prikaz ili koristiti bilo koji drugi program.)
3. Januar 2018. Prvi zadatak - Korišćenjem programskog jezika C kreirati Linux program u kome pet niti pristupa deljivom celobrojnom nizu. Četiri niti periodično (na 3 s) slučajno odabranom elementu niza dodaje slučajno generisanu celobrojnu vrednost iz opsega [-10:10]. Poslednja nit štampa elemenete niza samo ukoliko je njihova suma (nakon izmene od strane ostalih niti) paran broj. Za sinhronizaciju niti iskoristiti mehanizam mutex-a i uslovnih promenjivih. (Štampa nakon promene svih niti)
4. Januar 2018. Prvi zadatak (Štampa nakon promene svake niti ponaosob)
5. Januar 2018. Drugi zadatak - Korišćenjem programskog jezika C kreirati Linux program koji za kopiranje datoteke kreira dodatni proces dete. Ime datoteke koja se kopira i ime odredišne datoteke se prosleđuju kao argumenti komandne linije. Komunikacija između glavnog procesa i novokreiranog procesa deteta se odvija korišćenjem mehanizma datavoda. Glavni proces najpre procesu detetu prosleđuje ime odredišne datoteke. Nakon toga,glavni proces podatke iz izvorišne datoteke, u paketima od po 200 bajtova, prosleđuje procesu detetu. Proces dete primljene bajtove upisuje u odredišnu datoteku.
6. Januar 2021. Treći zadatak - Na programskom jeziku C napisati Linux program koji kreira dva dodatna procesa deteta. Proces roditelj sa procesom decom komunicira korišćenjem signala SIGUSR1 i SIGUSR2. Svakih 10 sekundi, proces roditelj šalje signal SIGUSR1 svakom procesu detetu. Kada procesi deca prime signal SIGUSR1, pristupaju generisanju tekstualnih datoteka sa podacima. Prvi proces dete generiše datoteku prva.txt koja sadrži 1000 slučajnih celih brojeca, a drugi proces generiše datoteku druga.txt koja sadrži 1000 slučajno generisanih malih slova. Svaki proces dete, kada završi sa generisanjem datoteke, obaveštavao o tome proces roditelj slanjem signala SIGUSR2. Kada proces roditelj primi signale SIGUSR2 od oba procesa deteta, na standardni izlaz štampa sadržaj obe datoteke. Čitav postupak se ponavlja 20 puta.(Ponekad preskoci neku iteraciju, ne umem da rešim ovo.)
7. Septembar 2021./Decenbar 2020. Treći zadatak - Korišćenjem programskog jezika C napisati Linux program koji omogućava da dva procesa komuniciraju i sinhronizuju svoje izvršavanje korišćenjem signala. Prvi proces po slučajnom principu kreira 1024 celobrojne vrednosti i smešta ih u binarnu datoteku "prenos.dat". Kada izgeneriše brojeve, obaveštava o tome drugi proces, slanjem signala SIGUSR1 i pauzira svoje izvršavanje. Kada drugi proces primi signal on sadržaj datoteke "prenos.dat" prikazuje na standardnom izlazu, šalje prvom procesu signal SIGUSR2 i nakon toga pauzira svoje izvršavanje. Po prijemu signala SIGUSR2, prvi proces startuje čitav postupak. Postupak se ponavlja 4096 puta. Nakon toga se oba procesa završavaju.
8. Oktobar 2018. Treći zadatak - Korišćenjem programskog jezika C napisati Linux program koji omogućava da dva procesa komuniciraju i sinhronizuju svoje izvršavanje korišćenjem signala. Prvi proces po slučajnom principu kreira 1024 celobrojne vrednosti i smešta ih u deljeni memorijski prostor. Kada izgeneriše brojeve, obaveštava o tome drugi proces, slanjem signala SIGUSR1 i pauzira svoje izvršavanje. Kada drugi proces primi signal on sadržaj deljenog memorijskog prostora prikazuje na standardnom izlazu, šalje prvom procesu signal SIGUSR2 i nakon toga pauzira svoje izvršavanje. Po prijemu signala SIGUSR2, prvi proces startuje čitav postupak. Postupak se ponavlja 4096 puta. Nakon toga se oba procesa završavaju.
9. Oktobar 2021. - Treći zadatak - Korišćenjem programskog jezika C napisati program koji kreira dodatni proces dete. Proces roditelj sa standardnog ulaza prihvata o studentima (broj indeksa, ime i prezime) i korišćenjem reda poruka te informacije šalje procesu detetu. Proces dete ima zadatak da nakon što primi podatke o poslednjem studentu sortira studente po broju indeksa i tako dobijeni spisak odštampa na standardnom izlazu.
10. Jun 2021. - Treći zadatak - Korišćenjem programskog jezika C napisati Linux program koji se deli na dva procesa. Proces roditelj sa stnadardnog ulaza čita liniju po liniju teksta i korišćenjem deljene memorije pročitanje linije teksta prosleđuje procesu detetu. Proces dete štampa na standardnom izlazu linije teksta koje prihvata iz deljene memorije. Obezbediti da proces dete štampa linije teksta onim redosledom kako se javljaju u tekstualnoj datoteci. Ovaj proces se ponavlja sve dok korisnik na standardnom ulazu ne unese reč "KRAJ".
11. Septembar 2020. - Treći zadatak - Korišćenjem programskog jezika C kreirati dva Linux procesa koji komuniciraju korišćenjem mehanizma redova poruka. Prvi proces čita stringove sa tastature i upisuje ih u red poruka sve dok se na tastaturi ne unese reč "KRAJ". Drugi proces čita stringove iz reda poruka (dok ne detektuje string "KRAJ") i prikzauje ih na standardnom izlazu. U sistemu postoji i treći proces koji kreira red poruka i pokreće ova dva procesa (korišćenjem execl/execv sistemskog poziva), a zatim čeka da se oni završe i tek nakon toga briše red poruka i završava svoje izvršavanje.
12. Septembar 2021. - Četvrti zadatak - Korišćenjem programskog jezika C napisati Linux program koji u zadatom direktorijumu (kao ulazni argument programa zadaje se apsolutna putanja do direktorijuma) i njegovim poddirektorijumima (maksimalno do nivoa koji se zadaje kao ulazni argument programa, ukoliko se za nivo zada 0 onda se stablo direktorijuma obilazi po čitavoj dubini) obrađuje i štampa prvih deset linija iz svake regularne datoteke.
13. Septembar 2018. - Četvrti zadatak - Korišćenjem programskog jezika C napisati Linux program koji sinhronizuje sadržaj dva direktorijuma. Putanje do direktorijuma koji se sinhronizuju se zadaju kao ulazni argumenti programa. Program za svaku regularnu datoteku iz provg direktorijuma proverava da li postoji odgovarajuća datoteka u drugom direktorijumu (upoređuje ime i veličinu datoteke). Ukoliko datoteka ne postoji, onda se ona kopira iz prvog u drugi direktorijum. Pretpostaviti da prvi direktorijum ne sadrži poddirektorijume.
14. Septembar 2020. - Četvrti zadatak - Korišćenjem programskog jezika C napisati Linux progam koji u zadatom direktorijumu (kao ulazni argument programa zadaje se apsolutna putanja do direktorijuma) i njegovim poddirektorijumima određuje imena svih regularnih datoteka koje su veće od 100KB i tako dobijeni spisak, sortiran po veličini datoteke u rastućem poretku, štampa na standardni izlaz.
## 5. Zadaci sa kolokvijuma
1. Kolokvijum 1. 2020/21. Prvi zadatak - Korišćenjem programskog jezika C napisati Linux progam koji u glavnoj niti sa tastature učitava broj elemenata celobrojnog niza i elemente niza. Zatim pokreće dve dodatne niti pri čemu prva dodatna nit elementima na neparnim indeksima dodaje broj 2, a druga dodatna nit ortira elemente na parnim indeksima u opadajući redosled.
2. Kolokvijum 1. 2020/21. Drugi zadatak - Korišćenjem programskog jezika C kreirati dva Linux procesa koji komuniciraju korišćenjem datavoda. Prvi proces sa tastature učitava imena fajlova i svako uneto ime fajla šalje datavodom drugom procesu. Drugi proces one fajlove koji počinju cifrom preimenuje dodajući im „n“ na kraju imena.
## 6. Signali
1. Korišćenjem programskog jezika C napisati UNIX/Linux program koji može da se prekine samo ako se kombinacija tastera Ctrl-C pritisne pet puta za redom. Ukoliko korisnik pritisne kombinaciju tastera Ctrl-Z dva puta zaredom program na ekranu ispisuje koliko puta do sada je pritisnuto Ctrl-C.
2. Korišdenjem programskog jezika C napisati Linux/UNIX program koji je nemogude prekinuti ili suspendovati korišdenjem kombinacije tastera Ctrl-C i Ctrl-Z. Proces je mogude prekinuti samo ukoliko se ove kombinacija tastera pritisnu u određenoj sekvenci (Npr. Ctrl-C, Ctrl-C, Ctrl-Z, Ctrl-C). Ukoliko korisnik pritisne pogrešnu kombinaciju tastera, sekvenca se resetuje i korisnik se o tome obaveštava.
## 7. Redovi poruka
1. Korišćenjem programskog jezika C napisati Linux/UNIX program koji kreira dodatni process sa kojim komunicira dvosmerno korišćenjem jednog reda poruka. Proces roditelj iz datoteke čije je ime prosleđeno kao argument komandne linije čita liniju po liniju teksta i svaku liniju šalje procesu detetu u posebnoj poruci. Proces dete u svakoj primljenoj liniji prebrojava broj pojavljivanja velikih slova abecede i procesu roditelju vraća kroz isti red poruka za svaku analiziranu liniju teksta kroz posebnu poruku redni broj linije i broj pojavljivanja velikih slova. Glavni program te podatke štampa na ekranu (redni broj linije i broj pojavljivanja velikih slova). Kada se analiziraju sve linije teksta iz datoteke glavni program na ekranu treba da odštampa “KRAJ”. (Obavezno da se zatvore jer ako se napune neće hteti dalje da šalju i primaće neki stari sadržaj. Ako ne javlja ni jednu grešku kompajler i nije segfault i program šlogirava promeniti broj reda i ima šanse da pomogne. Kreirati novu promenljivu pre svakog slanja, izgleda izvodi egzibicije sa memorijom i desi se problem kad se koristi jedna za svako slanje.)
## 8. Deljena memorija
1. Korišćenjem programskog jezika C napisati UNIX/Linux program koji se deli u dva procesa (proizvođač - potrošač) koji komuniciraju koristeći ograničeni kružni bafer u deljivoj memoriji. Kružni bafer je veličine 10 celih brojeva. Ovi procesi sinhronizuju svoje aktivnosti (upis u bafer i čitanje iz bafera) koristeći semafore.